//??
#ifdef WIN32
#include "stdafx.h"
#endif

#include "vnesunny.h"
#include "pybind11/pybind11.h"
#include "esunny/EsTradeAPI.h"


using namespace pybind11;
using namespace EsTradeAPI;

//????
#define ONCONNECT 0
#define ONRSPLOGIN 1
#define ONRTNCONTACTINFO 2
#define ONRSPREQUESTVERTIFICATECODE 3
#define ONRSPREQUESTVERIFYIDENTITY 4
#define ONRSPSETVERTIFICATECODE 5
#define ONRTNERRORMSG 6
#define ONAPIREADY 7
#define ONDISCONNECT 8
#define ONRSPSUBMITUSERLOGININFO 9
#define ONRSPCHANGEPASSWORD 10
#define ONRSPSETRESERVEDINFO 11
#define ONRTNCONTRACT 12
#define ONRTNFUND 13
#define ONRTNORDER 14
#define ONRSPORDERACTION 15
#define ONRSPQRYORDERPROCESS 16
#define ONRTNFILL 17
#define ONRTNPOSITION 18
#define ONRTNCLOSE 19
#define ONRTNPOSITIONPROFIT 20
#define ONRSPQRYDEEPQUOTE 21
#define ONRTNEXCHANGESTATEINFO 22
#define ONRTNREQQUOTENOTICE 23
#define ONRSPACCOUNTRENTINFO 24
#define ONRSPTRADEMESSAGE 25
#define ONRTNTRADEMESSAGE 26
#define ONRSPQRYHISORDER 27
#define ONRSPQRYHISORDERPROCESS 28
#define ONRSPQRYHISFILL 29
#define ONRSPQRYHISPOSITION 30
#define ONRSPQRYHISDELIVERY 31
#define ONRSPQRYACCOUNTCASHADJUST 32
#define ONRSPQRYBILL 33
#define ONRSPACCOUNTFEERENT 34
#define ONRSPACCOUNTMARGINRENT 35
#define ONRSPADDMOBILEDEVICE 36
#define ONRSPQRYMANAGEINFOFORESTAR 37
#define ONRSPQRYSYSTEMPARAMETER 38
#define ONRSPQRYTRADECENTERFRONTADDRESS 39
#define ONRTNCOMMODITYINFO 40
#define ONRTNCURRENCYINFO 41
#define ONRSPQRYACCOUNTSTORAGE 42
#define ONRTNACCOUNTSTORAGE 43
#define ONRSPQRYSPOTLOCK 44
#define ONRTNSPOTLOCK 45
#define ONRSPSPECIALORDERACTION 46
#define ONRTNSPECIALORDER 47
#define ONRTNCOMBINEPOSITION 48
#define ONRTNCONTRACTQUOTE 49
#define ONRSPQRYTRUSTDEVICE 50
#define ONRSPADDTRUSTDEVICE 51
#define ONRSPDELTRUSTDEVICE 52
#define ONRTNADDUSERRIGHT 53
#define ONRTNDELUSERRIGHT 54
#define ONRSPQRYMANAGERCONFIGFILE 55


///-------------------------------------------------------------------------------------
///C++ SPI???????????????
///-------------------------------------------------------------------------------------

//API???????
class TdApi : public IEsTradeAPINotify
{
private:
	IEsTradeAPI* api;            //API????
    thread task_thread;                    //????????????python???????????
    TaskQueue task_queue;                //???????
    bool active = false;                //??????

public:
    TdApi()
    {
    };

    ~TdApi()
    {
        if (this->active)
        {
            this->exit();
        }
    };

    //-------------------------------------------------------------------------------------
    //API???????
    //-------------------------------------------------------------------------------------

	virtual void ES_CDECL OnConnect(const TAPISTR_20 UserNo);
	/**
	* @brief	???????????
	* @details	??????StartUser()?????????????????StartUser()?????????????????API??????????????????????????????????????????????????????????????????ß≥?
	* @param[in] UserNo ??????UserNo
	* @param[in] nErrorCode ?????????,0??????
	* @param[in] pLoginRspInfo ??????????????nErrorCode!=0????loginRspInfo=NULL??
	* @attention	???????????????????????????????????????????????????
    * 
	* @ingroup G_T_Login
	*/
	virtual void ES_CDECL OnRspLogin(const TAPISTR_20 UserNo, TAPIINT32 nErrorCode, const TapAPITradeLoginRspInfo *pLoginRspInfo);
	/**
	* @brief	?????????????????(?????????????)
	* @details	???????????????????????????????????????????????????????????????????????¥¬??,?????????????????
	* @param[in] UserNo ??????UserNo
	* @param[in] nErrorCode ?????????,0??????
	* @param[in] isLast ????????????????????
	* @param[in] pInfo ??????????????errorCode!=0????ContactInfo????
	* @attention	????????????????????????????????????????????????????RequestVertificateCode()???????????????????????
	*
    * @ingroup G_T_Login
	*/
	virtual void ES_CDECL OnRtnContactInfo(const TAPISTR_20 UserNo, TAPIINT32 nErrorCode, TAPIYNFLAG isLast, const TapAPISecondInfo* pInfo);
	/**
	* @brief	?????????????????(?????????????)
	* @details	?????????????????????????????????????????????????????????????????ßπ??
	* @param[in] UserNo ??????UserNo
	* @param[in] nSessionID ?????????????ID
	* @param[in] nErrorCode ?????ß—?????????????.
	* @param[in] isLast ????????????????????
	* @param[in] pInfo ???????????ßπ??????????????????????ßπ?????????????????????????????????????????????????
	* @attention ??????????????????SetVertificateCode()??
    * 
	* @ingroup G_T_Login
	*/
	virtual void ES_CDECL OnRspRequestVertificateCode(const TAPISTR_20 UserNo, TAPIUINT32 nSessionID, TAPIINT32 nErrorCode, TAPIYNFLAG isLast, const TapAPIVertificateCode *pInfo);
	/**
     * @brief	?????????(?????????????)
	 * @details	 ???????????????????????????????????????????????????????????????°§??????????
     * @param UserNo ??????UserNo
     * @param nSessionID ????????ID
     * @param nErrorCode ??????,0??????
     * @param isLast ?????????????????
     * @param pInfo ?????????
     * @attention ??????????????????RequestVertificateCode()??
     * 
	 * @ingroup G_T_Login
     */
    virtual void ES_CDECL OnRspRequestVerifyIdentity(const TAPISTR_20 UserNo, TAPIUINT32 nSessionID, TAPIINT32 nErrorCode, TAPIYNFLAG isLast, const TapAPIVerifyIdentity* pInfo);
    /**
     * @brief	????????????(?????????????)
     * @param UserNo ??????UserNo
     * @param nSessionID ??????????ID
     * @param nErrorCode ??????,0??????
     * @param isLast ?????????????????
     * @param pInfo ????????
     * 
	 * @ingroup G_T_Login
     */
    virtual void ES_CDECL OnRspSetVertificateCode(const TAPISTR_20 UserNo, TAPIUINT32 nSessionID, TAPIINT32 nErrorCode, TAPIYNFLAG isLast, const TapAPISecondCertificationRsp *pInfo);
    /**
	* @brief ?????????????
	* @details ??API????????????????????????????
	* @param[in] UserNo ??????UserNo
	* @param[in] ErrorMsg ??????????
	* @attention ?®≤?????????????API????????????????
    * 
	* @ingroup G_T_TradeSystem
	*/
	virtual void ES_CDECL OnRtnErrorMsg(const TAPISTR_20 UserNo, const TAPISTR_500 ErrorMsg);
	/**
	* @brief	?????API???????
	* @details	??????????????????????????ßÿ??????????????????????????????????????????????????????????
	* @param[in] UserNo ??????UserNo
	* @attention ????????????ß‹???????
    * 
	* @ingroup G_T_Login
	*/
	virtual void ES_CDECL OnAPIReady(const TAPISTR_20 UserNo);
	/**
	* @brief API??????????????
	* @details ??API??®¥???????????????????????????????????????????????????????????????????
	* @param[in] UserNo ??????UserNo
	* @param[in] nReasonCode ?????????
    * 
	* @ingroup G_T_Disconnect
	*/
	virtual void ES_CDECL OnDisconnect(const TAPISTR_20 UserNo, TAPIINT32 nReasonCode);
	/**
	* @brief ???????????????????(?????????)
	* @param[in] UserNo ????????????UserNo
	* @param[in] nSessionID ?????????????????ID,??SubmitUserLoginInfo?????????ID???
	* @param[in] pRspInfo ????????????
	* @attention ??????????pRspInfo??????????????????????????????????ßπ??
    * 
	* @ingroup G_T_UserInfo
	*/
	virtual void ES_CDECL OnRspSubmitUserLoginInfo(const TAPISTR_20 UserNo, TAPIUINT32 nSessionID, const TapAPISubmitUserLoginInfoRsp *pRspInfo);
	/**
	* @brief ?????????????
	* @param[in] UserNo ????????????UserNo
	* @param[in] nSessionID ????????????ID,??ChangePassword??????ID???
	* @param[in] nErrorCode ?????????0??????
    * 
	* @ingroup G_T_UserInfo
	*/
	virtual void ES_CDECL OnRspChangePassword(const TAPISTR_20 UserNo, TAPIUINT32 nSessionID, TAPIINT32 nErrorCode, const TapAPIChangePasswordRsp* pInfo);
	/**
	* @brief ?????????????????
	* @param[in] UserNo ????????????UserNo
	* @param[in] nSessionID ???????????????????ID
	* @param[in] nErrorCode ?????????0??????
	* @param[in] info ????????????
	* @attention ??????????info??????????????????????????????????ßπ??
	* @note ??????¶ƒ???
    * 
	* @ingroup G_T_UserInfo
	*/
	virtual void ES_CDECL OnRspSetReservedInfo(const TAPISTR_20 UserNo, TAPIUINT32 nSessionID, TAPIINT32 nErrorCode, const TAPISTR_50 info);
	/**
	* @brief	??????????????(????????????????)
	* @details	?????????????????????????????????????ßŸ????????????????????????????????????????
	* @param[in] UserNo ????????????UserNo
	* @param[in] pRtnInfo	????????????
	* @attention ??????????pRspInfo??????????????????????????????????ßπ??
	* 
	* @ingroup G_T_Contract
	*/
	virtual void ES_CDECL OnRtnContract(const TAPISTR_20 UserNo, const TapAPITradeContractInfo *pRtnInfo);
	/**
	* @brief ??????Å£??
	* @details ???????ß‘?????????????????Å£?????????????????????
	* @param[in] UserNo ????????????UserNo
	* @param[in] pRtnInfo ????????????
	* @note ??????????????????????⁄ÖLogin???NoticeIgnoreFlag?????¶±?
	* @attention ??????????pRspInfo??????????????????????????????????ßπ??
	*
	* @ingroup G_T_FundInfo
	*/
	virtual void ES_CDECL OnRtnFund(const TAPISTR_20 UserNo, const TapAPIFundData *pRtnInfo);
	/**
	* @brief ????????ß≥????????????????????????????
	* @details ???????????????????????????????ß’???????????????????????????????????????????????????????????????ß—??????????????????
	*			??????????????????ß÷???ß‹??????????????????ßµ????????ß›???????ID
	* @param[in] UserNo ????????????UserNo
	* @param[in] nRequestID ??????ID
	* @param[in] pRtnInfo ????????????
	* @note ??????????????????????⁄ÖLogin???NoticeIgnoreFlag?????¶±?
	* @attention ??????????pRspInfo??????????????????????????????????ßπ??
	*
	* @ingroup G_T_TradeActions
	*/
	virtual void ES_CDECL OnRtnOrder(const TAPISTR_20 UserNo, TAPIUINT32 nRequestID, const TapAPIOrderInfo *pRtnInfo);
	/**
    * @brief	???????????(?????????????)
    * @details	?????????????????????????ß’??????????????????????????ß’?????????????????????????.
    *     ???????????????????OnRtnOrder???????????OnRtnOrder?????
    * @param[in] nRequestID ??????ID
    * @param[in] nErrorCode ??????0 ??????
    * @param[in] pRtnInfo ????????????
    * @attention ??????????pRtnInfo??????????????????????????????????ßπ??
    *
    * @ingroup G_T_TradeActions
    */
    virtual void ES_CDECL OnRspOrderAction(const TAPISTR_20 UserNo, TAPIUINT32 nRequestID, TAPIINT32 nErrorCode, const TapAPIOrderActionRsp *pRtnInfo);
    /**
	* @brief ??????????ß“Å£???????
	* @param[in] UserNo ????????????UserNo
	* @param[in] nRequestID ??????ID
	* @param[in] nErrorCode ??????0 ??????
	* @param[in] isLast ??????????????????
	* @param[in] pRspInfo ????????????
	* @attention ??????????pRspInfo??????????????????????????????????ßπ??
	*
	* @ingroup G_T_TradeInfo
	*/
	virtual void ES_CDECL OnRspQryOrderProcess(const TAPISTR_20 UserNo, TAPIUINT32 nRequestID, TAPIINT32 nErrorCode, TAPIYNFLAG isLast, const TapAPIOrderInfo *pRspInfo);
	/**
	* @brief ?????????????
	* @details ???????ß‘??????????????????
	* @param[in] UserNo ????????????UserNo
	* @param[in] pRtnInfo ????????????
	* @note ??????????????????????⁄ÖLogin???NoticeIgnoreFlag?????¶±?
	* @attention ??????????pRspInfo??????????????????????????????????ßπ??
	*
	* @ingroup G_T_TradeActions
	*/
	virtual void ES_CDECL OnRtnFill(const TAPISTR_20 UserNo, const TapAPIFillInfo *pRtnInfo);
	/**
	* @brief ???Å£??????
	* @param[in] UserNo ????????????UserNo
	* @param[in] pRtnInfo ????????????
	* @note ??????????????????????⁄ÖLogin???NoticeIgnoreFlag?????¶±?
	* @attention ??????????pRspInfo??????????????????????????????????ßπ??
	*
	* @ingroup G_T_TradeActions
	*/
	virtual void ES_CDECL OnRtnPosition(const TAPISTR_20 UserNo, const TapAPIPositionInfo *pRtnInfo);
	/**
	* @brief ???????Å£????(?????????)
	* @param[in] UserNo ????????????UserNo
	* @param[in] pRtnInfo ????????????
	* @note ??????????????????????⁄ÖLogin???NoticeIgnoreFlag?????¶±?
	* @attention ??????????pRspInfo??????????????????????????????????ßπ??
	*
	* @ingroup G_T_TradeActions
	*/
	virtual void ES_CDECL OnRtnClose(const TAPISTR_20 UserNo, const TapAPICloseInfo *pRtnInfo);
	/**
	* @brief ????????(?????????)
	* @param[in] UserNo ????????????UserNo
	* @param[in] pRtnInfo ????????????
	* @note ??????????????????????⁄ÖLogin???NoticeIgnoreFlag?????¶±?
	* @attention ??????????pRspInfo??????????????????????????????????ßπ??
	*
	* @ingroup G_T_TradeActions
	*/
	virtual void ES_CDECL OnRtnPositionProfit(const TAPISTR_20 UserNo, const TapAPIPositionProfitNotice *pRtnInfo);
	/**
	* @brief ????????????(?????????)
	* @param[in] UserNo ????????????UserNo
	* @param[in] nRequestID ????ID
	* @param[in] nErrorCode ??????0 ??????
	* @param[in] isLast ??????????????????
	* @param[in] pRspInfo ??????????????????â^??nErrorCode???0???pRspInfo????
	* @attention ??????????pRspInfo??????????????????????????????????ßπ??
	*
	* @ingroup G_T_DeepQuote
	*/
	virtual void ES_CDECL OnRspQryDeepQuote(const TAPISTR_20 UserNo, TAPIUINT32 nRequestID, TAPIINT32 nErrorCode, TAPIYNFLAG isLast, const TapAPIDeepQuoteQryRsp *pRspInfo);
	/**
	* @brief ????????????????(?????????)
	* @param[out] UserNo ????????????UserNo
	* @param[out] pRtnInfo ????????????
	* @attention ??????????pRspInfo??????????????????????????????????ßπ??
	*
	* @ingroup G_T_TradeSystem
	*/
	virtual void ES_CDECL OnRtnExchangeStateInfo(const TAPISTR_20 UserNo, const TapAPIExchangeStateInfoNotice *pRtnInfo);
	/**
	* @brief ?????(????????????????)
	* @param[in] UserNo ????????????UserNo
	* @param[in] pRtnInfo ????????????
	* @attention ??????????pRspInfo??????????????????????????????????ßπ??
	*
	* @ingroup G_T_TradeActions
	*/
	virtual void ES_CDECL OnRtnReqQuoteNotice(const TAPISTR_20 UserNo, const TapAPIReqQuoteNotice *pRtnInfo);
	/**
	* @brief ?????????????(?????????)
	* @details ???????????????????*??????*???????*???
	*          ????????????????*???????
	*          ??????????????????????*?????????????+????*??????*???*???????????
	* @param[in] UserNo ????????????UserNo
	* @param[in] nRequestID ????ID
	* @param[in] nErrorCode ??????0 ??????
	* @param[in] isLast 	??????????????????
	* @param[in] pRspInfo	????????????
	* @attention  ??????????pRspInfo??????????????????????????????????ßπ??
	*
	* @ingroup G_T_AccountRentInfo
	*/
	virtual void ES_CDECL OnRspAccountRentInfo(const TAPISTR_20 UserNo, TAPIUINT32 nRequestID, TAPIINT32 nErrorCode, TAPIYNFLAG isLast, const TapAPIAccountRentInfo *pRspInfo);
	/**
	* @brief	?????????????
	* @details	???????????????????
	* @param[in] UserNo ????????????UserNo
	* @param[in] nRequestID ????ID
	* @param[in] nErrorCode ??????0 ??????
	* @param[in] isLast 	??????????????????
	* @param[in] pRspInfo	????????????
	* @attention ??????????pRspInfo??????????????????????????????????ßπ??
	*
	* @ingroup G_T_TradeSystem
	*/
	virtual void ES_CDECL OnRspTradeMessage(const TAPISTR_20 UserNo, TAPIUINT32 nRequestID, TAPIINT32 nErrorCode, TAPIYNFLAG isLast, const TapAPITradeMessage *pRspInfo);
    /**
	* @brief	?????????
	* @details	????????????ß·?????????????????????????????ßª¶≤???????????ßª????????????????????
	* @param[in] UserNo ????????????UserNo
	* @param[in] pRtnInfo	????????????
	* @attention ??????????pRtnInfo??????????????????????????????????ßπ??
	*
	* @ingroup G_T_TradeSystem
	*/
	virtual void ES_CDECL OnRtnTradeMessage(const TAPISTR_20 UserNo, const TapAPITradeMessage *pRtnInfo);
	/**
	* @brief ?????ß”?????(?????????????)
	* @param[in] UserNo ????????????UserNo
	* @param[in] nRequestID ??????ID
	* @param[in] nErrorCode ??????0 ??????
	* @param[in] isLast 	??????????????????
	* @param[in] pInfo		????????????
	* @attention ??????????pInfo??????????????????????????????????ßπ??
	*
	* @ingroup G_T_HisInfo
	*/
	virtual void ES_CDECL OnRspQryHisOrder(const TAPISTR_20 UserNo, TAPIUINT32 nRequestID, TAPIINT32 nErrorCode, TAPIYNFLAG isLast, const TapAPIHisOrderQryRsp *pInfo);
	/**
	* @brief ???????????????(?????????????)
	* @param[in] UserNo ????????????UserNo
	* @param[in] nRequestID ??????ID
	* @param[in] nErrorCode ??????0 ??????
	* @param[in] isLast 	??????????????????
	* @param[in] pInfo		????????????
	* @attention ??????????pInfo??????????????????????????????????ßπ??
	*
	* @ingroup G_T_HisInfo
	*/
	virtual void ES_CDECL OnRspQryHisOrderProcess(const TAPISTR_20 UserNo, TAPIUINT32 nRequestID, TAPIINT32 nErrorCode, TAPIYNFLAG isLast, const TapAPIHisOrderProcessQryRsp *pInfo);
	/**
	* @brief ????????????(?????????????)
	* @param[in] UserNo ????????????UserNo
	* @param[in] nRequestID ??????ID
	* @param[in] nErrorCode ??????0 ??????
	* @param[in] isLast 	??????????????????
	* @param[in] pInfo		????????????
	* @attention ??????????pInfo??????????????????????????????????ßπ??
	*
	* @ingroup G_T_HisInfo
	*/
	virtual void ES_CDECL OnRspQryHisFill(const TAPISTR_20 UserNo, TAPIUINT32 nRequestID, TAPIINT32 nErrorCode, TAPIYNFLAG isLast, const TapAPIHisFillQryRsp *pInfo);
	/**
	* @brief ???????????(?????????????)
	* @param[in] UserNo ????????????UserNo
	* @param[in] nRequestID ??????ID
	* @param[in] nErrorCode ??????0 ??????
	* @param[in] isLast 	??????????????????
	* @param[in] pInfo		????????????
	* @attention ??????????pInfo??????????????????????????????????ßπ??
	*
	* @ingroup G_T_HisInfo
	*/
	virtual void ES_CDECL OnRspQryHisPosition(const TAPISTR_20 UserNo, TAPIUINT32 nRequestID, TAPIINT32 nErrorCode, TAPIYNFLAG isLast, const TapAPIHisPositionQryRsp *pInfo);
	/**
	* @brief ????????????(?????????)
	* @param[in] UserNo ????????????UserNo
	* @param[in] nRequestID ??????ID
	* @param[in] nErrorCode ??????0 ??????
	* @param[in] isLast 	??????????????????
	* @param[in] pInfo		????????????
	* @attention ??????????pInfo??????????????????????????????????ßπ??
	*
	* @ingroup G_T_HisInfo
	*/
	virtual void ES_CDECL OnRspQryHisDelivery(const TAPISTR_20 UserNo, TAPIUINT32 nRequestID, TAPIINT32 nErrorCode, TAPIYNFLAG isLast, const TapAPIHisDeliveryQryRsp *pInfo);
	/**
	* @brief ????????????(?????????????)
	* @param[in] UserNo ????????????UserNo
	* @param[in] nRequestID ??????ID
	* @param[in] nErrorCode ??????0 ??????
	* @param[in] isLast 	??????????????????
	* @param[in] pInfo		????????????
	* @attention ??????????pInfo??????????????????????????????????ßπ??
	*
	* @ingroup G_T_FundInfo
	*/
	virtual void ES_CDECL OnRspQryAccountCashAdjust(const TAPISTR_20 UserNo, TAPIUINT32 nRequestID, TAPIINT32 nErrorCode, TAPIYNFLAG isLast, const TapAPIAccountCashAdjustQryRsp *pInfo);
	/**
	* @brief ????????????
	* @param[in] UserNo ????????????UserNo
	* @param[in] nRequestID ??????ID
	* @param[in] nErrorCode ??????0 ??????
	* @param[in] isLast 	??????????????????
	* @param[in] pInfo		????????????
	* @attention ??????????pInfo??????????????????????????????????ßπ??
	*
	* @ingroup G_T_Bill
	*/
	virtual void ES_CDECL OnRspQryBill(const TAPISTR_20 UserNo, TAPIUINT32 nRequestID, TAPIINT32 nErrorCode, TAPIYNFLAG isLast, const TapAPIBillQryRsp *pInfo);
	/**
	* @brief ???????????????(?????????????)
	* @param[in] UserNo ????????????UserNo
	* @param[in] nRequestID ??????ID
	* @param[in] nErrorCode ??????0 ??????
	* @param[in] isLast 	??????????????????
	* @param[in] pInfo		????????????
	* @attention ??????????pInfo??????????????????????????????????ßπ??
	*
	* @ingroup G_T_AccountRentInfo
	*/
	virtual void ES_CDECL OnRspAccountFeeRent(const TAPISTR_20 UserNo, TAPIUINT32 nRequestID, TAPIINT32 nErrorCode, TAPIYNFLAG isLast, const TapAPIAccountFeeRentQryRsp *pInfo);
	/**
	* @brief ??????????????(?????????)
	* @param[in] UserNo ????????????UserNo
	* @param[in] nRequestID ??????ID
	* @param[in] nErrorCode ??????0 ??????
	* @param[in] isLast 	??????????????????
	* @param[in] pInfo		????????????
	* @attention ??????????pInfo??????????????????????????????????ßπ??
	*
	* @ingroup G_T_AccountRentInfo
	*/
	virtual void ES_CDECL OnRspAccountMarginRent(const TAPISTR_20 UserNo, TAPIUINT32 nRequestID, TAPIINT32 nErrorCode, TAPIYNFLAG isLast, const TapAPIAccountMarginRentQryRsp *pInfo);
	/**
	* @brief ??????????ıÙ???????(?????????????)
	* @param[in] UserNo ??????UserNo
	* @param[in] nRequestID ????ID
	* @param[in] nErrorCode ??????0 ??????
	* @param[in] isLast 	??????????????????
	* @param[in] pInfo		????????????
	* @attention ??????????pInfo??????????????????????????????????ßπ??
	* @operationtype ??????
	*
	* @ingroup G_T_Cellphone
	*/
	virtual void ES_CDECL OnRspAddMobileDevice(const TAPISTR_20 UserNo, TAPIUINT32 nRequestID, TAPIINT32 nErrorCode, TAPIYNFLAG isLast, const TapAPIMobileDeviceAddRsp *pInfo);
	/**
	* @brief ??????????(?????????????)
	* @param[in] UserNo ??????UserNo
	* @param[in] nRequestID ????ID
	* @param[in] nErrorCode ??????0 ??????
	* @param[in] isLast 	??????????????????
	* @param[in] pInfo		????????????
	* @attention ??????????pInfo??????????????????????????????????ßπ??
	* @operationtype ??????
	*
	* @ingroup G_T_Cellphone
	*/
	virtual void ES_CDECL OnRspQryManageInfoForEStar(const TAPISTR_20 UserNo, TAPIUINT32 nRequestID, TAPIINT32 nErrorCode, TAPIYNFLAG isLast, const TapAPIManageInfo *pInfo);
	/**
	* @brief ?????????(?????????????)
	* @param[in] UserNo ??????UserNo
	* @param[in] nRequestID ????ID
	* @param[in] nErrorCode ??????0 ??????
	* @param[in] isLast 	??????????????????
	* @param[in] pInfo		????????????
	* @attention ??????????pInfo??????????????????????????????????ßπ??
	* @operationtype ??????
	*
	* @ingroup G_T_Cellphone
	*/
	virtual void ES_CDECL OnRspQrySystemParameter(const TAPISTR_20 UserNo, TAPIUINT32 nRequestID, TAPIINT32 nErrorCode, TAPIYNFLAG isLast, const TapAPISystemParameterInfo *pInfo);
	/**
	* @brief ???????????????????(?????????????)
	* @param[in] UserNo ??????UserNo
	* @param[in] nRequestID ????ID
	* @param[in] nErrorCode ??????0 ??????
	* @param[in] isLast 	??????????????????
	* @param[in] pInfo		????????????
	* @attention ??????????pInfo??????????????????????????????????ßπ??
	* @operationtype ??????
	*
	* @ingroup G_T_Cellphone
	*/
	virtual void ES_CDECL OnRspQryTradeCenterFrontAddress(const TAPISTR_20 UserNo, TAPIUINT32 nRequestID, TAPIINT32 nErrorCode, TAPIYNFLAG isLast, const TapAPITradeCenterFrontAddressInfo *pInfo);
	/**
	* @brief ????????(?????????)
	* @param[in] UserNo ????????????UserNo
	* @param[in] pInfo	????????????
	* @attention  ??????????pRspInfo??????????????????????????????????ßπ??
	*
	* @ingroup G_T_Commodity
	*/
	virtual void ES_CDECL OnRtnCommodityInfo(const TAPISTR_20 UserNo, const TapAPICommodityInfo *pInfo);
	/**
	* @brief ?????????(?????????)
	* @param[in] UserNo ????????????UserNo
	* @param[in] pInfo	????????????
	* @attention  ??????????pRspInfo??????????????????????????????????ßπ??
	*
	* @ingroup G_T_TradeSystem
	*/
	virtual void ES_CDECL OnRtnCurrencyInfo(const TAPISTR_20 UserNo, const TapAPICurrencyInfo *pInfo);
    /**
    * @brief ??????????????(?????????)
	* @param[in] UserNo ????????????UserNo
	* @param[in] nRequestID ????ID
	* @param[in] nErrorCode ??????0 ??????
	* @param[in] isLast 	??????????????????
	* @param[in] pInfo	????????????
	* @attention  ??????????pRspInfo??????????????????????????????????ßπ??
	*
	* @ingroup G_T_TradeActions
    */
    virtual void ES_CDECL OnRspQryAccountStorage(const TAPISTR_20 UserNo, TAPIUINT32 nRequestID, TAPIINT32 nErrorCode, TAPIYNFLAG isLast, const TapAPIAccountStorageInfo* pInfo);
    /**
    * @brief ???????????(?????????)
	* @param[in] UserNo ????????????UserNo
	* @param[in] pInfo	????????????
	* @attention  ??????????pRspInfo??????????????????????????????????ßπ??
	*
	* @ingroup G_T_TradeActions
    */
    virtual void ES_CDECL OnRtnAccountStorage(const TAPISTR_20 UserNo, const TapAPIAccountStorageInfo* pInfo);
    /**
    * @brief ??????????????????(?????????)
	* @param[in] UserNo ????????????UserNo
	* @param[in] nRequestID ????ID
	* @param[in] nErrorCode ??????0 ??????
	* @param[in] isLast 	??????????????????
	* @param[in] pInfo	????????????
	* @attention  ??????????pRspInfo??????????????????????????????????ßπ??
	*
	* @ingroup G_T_TradeActions
    */
    virtual void ES_CDECL OnRspQrySpotLock(const TAPISTR_20 UserNo, TAPIUINT32 nRequestID, TAPIINT32 nErrorCode, TAPIYNFLAG isLast, const TapAPISpotLockInfo* pInfo);
    /**
    * @brief ??????????????(?????????)
	* @param[in] UserNo ????????????UserNo
	* @param[in] pInfo	????????????
	* @attention  ??????????pRspInfo??????????????????????????????????ßπ??
	*
	* @ingroup G_T_TradeActions
    */
    virtual void ES_CDECL OnRtnSpotLock(const TAPISTR_20 UserNo, const TapAPISpotLockInfo* pInfo);
    /**
    * @brief	?????????ß”??????(ETF???)
	* @param[in] UserNo ????????????UserNo
    * @details	???????????????ß’????????sessionID???????????sessionID??????????????????????
    * @param[in] sessionID ??????ID
    * @param[in] errorCode ??????0 ??????
    * @param[in] pRtnInfo ????????????
    * @attention ??????????pRtnInfo??????????????????????????????????ßπ??
	*
    * @ingroup G_T_ETF
    */
    virtual void ES_CDECL OnRspSpecialOrderAction(const TAPISTR_20 UserNo, TAPIUINT32 nRequestID, TAPIINT32 nErrorCode, const TapAPISpecialOrderInfo *pRtnInfo);
    /**
    * @brief ???????????????(ETF???)
 	* @param[in] UserNo ????????????UserNo
    * @param[in] nRequestID ????ID
    * @param[in] nErrorCode ??????0 ??????
    * @param[out] pInfo	????????????
    * @attention  ??????????pRspInfo??????????????????????????????????ßπ??
	*
    * @ingroup G_T_ETF
    */
    virtual void ES_CDECL OnRtnSpecialOrder(const TAPISTR_20 UserNo, TAPIUINT32 nRequestID, const TapAPISpecialOrderInfo* pInfo);
    /**
    * @brief ??????????(ETF???)
	* @param[out] UserNo ????????????UserNo
	* @param[out] pInfo	????????????
	* @attention  ??????????pRspInfo??????????????????????????????????ßπ??
	*
	* @ingroup G_T_ETF
    */
    virtual void ES_CDECL OnRtnCombinePosition(const TAPISTR_20 UserNo, const TapAPICombinePositionInfo* pInfo);
    /**
    * @brief ???????????????(?????????????)
	* @param[out] UserNo ????????????UserNo
	* @param[out] pInfo	????????????
	* @attention  ??????????pRspInfo??????????????????????????????????ßπ??
	*
	* @ingroup G_T_TradeActions 
    */
    virtual void ES_CDECL OnRtnContractQuote(const TAPISTR_20 UserNo, const TapAPIContractQuoteInfo* pInfo);
    /**
    * @brief ????????ıÙ??????(?????????????)
	* @param[in] UserNo ????????????UserNo
	* @param[in] nRequestID ????ID
	* @param[in] nErrorCode ??????0 ??????
	* @param[in] isLast 	??????????????????
	* @param[in] pInfo	????????????
	* @attention  ??????????pRspInfo??????????????????????????????????ßπ??
	*
	* @ingroup G_T_UserInfo
    */
    virtual void ES_CDECL OnRspQryTrustDevice(const TAPISTR_20 UserNo, TAPIUINT32 nRequestID, TAPIINT32 nErrorCode, TAPIYNFLAG isLast, const TapAPITrustDeviceInfo* pInfo);
    /**
    * @brief ????????ıÙ???????(?????????????)
	* @param[in] UserNo ????????????UserNo
	* @param[in] nRequestID ????ID
	* @param[in] nErrorCode ??????0 ??????
	* @param[in] isLast 	??????????????????
	* @param[in] pInfo	????????????
	* @attention  ??????????pRspInfo??????????????????????????????????ßπ??
	*
	* @ingroup G_T_UserInfo
    */
    virtual void ES_CDECL OnRspAddTrustDevice(const TAPISTR_20 UserNo, TAPIUINT32 nRequestID, TAPIINT32 nErrorCode, TAPIYNFLAG isLast, const TapAPITrustDeviceAddRsp* pInfo);
    /**
    * @brief ????????ıÙ??????(?????????????)
	* @param[in] UserNo ????????????UserNo
	* @param[in] nRequestID ????ID
	* @param[in] nErrorCode ??????0 ??????
	* @param[in] isLast 	??????????????????
	* @param[in] pInfo	????????????
	* @attention  ??????????pRspInfo??????????????????????????????????ßπ??
	*
	* @ingroup G_T_UserInfo
    */
    virtual void ES_CDECL OnRspDelTrustDevice(const TAPISTR_20 UserNo, TAPIUINT32 nRequestID, TAPIINT32 nErrorCode, TAPIYNFLAG isLast, const TapAPITrustDeviceDelRsp* pInfo);
    /**
    * @brief ????????????(?????????)
	* @param[out] UserNo ????????????UserNo
	* @param[out] pInfo	????????????
	* @attention  ??????????pRspInfo??????????????????????????????????ßπ??
	*
	* @ingroup G_T_UserInfo 
    */
    virtual void ES_CDECL OnRtnAddUserRight(const TAPISTR_20 UserNo, const TapAPIUserRightInfo* pInfo);
    /**
    * @brief ???????????(?????????)
	* @param[out] UserNo ????????????UserNo
	* @param[out] pInfo	????????????
	* @attention  ??????????pRspInfo??????????????????????????????????ßπ??
	*
	* @ingroup G_T_UserInfo 
    */
    virtual void ES_CDECL OnRtnDelUserRight(const TAPISTR_20 UserNo, const TapAPIUserRightInfo* pInfo);
    /**
    * @brief ?????????????????(?????????????)
    * @param[out] UserNo ????????????UserNo
    * @param[out] nRequestID ????ID
    * @param[out] nErrorCode ??????0 ??????
    * @param[out] isLast ??????????????????
    * @param[out] pInfo ????????????
	* @attention  ??????????pRspInfo??????????????????????????????????ßπ??
    * 
	* @ingroup G_T_TradeSystem
    */
    virtual void ES_CDECL OnRspQryManagerConfigFile(const TAPISTR_20 UserNo, TAPIUINT32 nRequestID, TAPIINT32 nErrorCode, TAPIYNFLAG isLast, const TapAPIManagerConfigFileQryRsp* pInfo);



    //-------------------------------------------------------------------------------------
    //task??????
    //-------------------------------------------------------------------------------------

	void processTask();

    void processConnect(Task *task);
    
    void processRspLogin(Task *task);
    
    void processRtnContactInfo(Task *task);
    
    void processRspRequestVertificateCode(Task *task);
    
    void processRspRequestVerifyIdentity(Task *task);
    
    void processRspSetVertificateCode(Task *task);
    
    void processRtnErrorMsg(Task *task);
    
    void processAPIReady(Task *task);
    
    void processDisconnect(Task *task);
    
    void processRspSubmitUserLoginInfo(Task *task);
    
    void processRspChangePassword(Task *task);
    
    void processRspSetReservedInfo(Task *task);
    
    void processRtnContract(Task *task);
    
    void processRtnFund(Task *task);
    
    void processRtnOrder(Task *task);
    
    void processRspOrderAction(Task *task);
    
    void processRspQryOrderProcess(Task *task);
    
    void processRtnFill(Task *task);
    
    void processRtnPosition(Task *task);
    
    void processRtnClose(Task *task);
    
    void processRtnPositionProfit(Task *task);
    
    void processRspQryDeepQuote(Task *task);
    
    void processRtnExchangeStateInfo(Task *task);
    
    void processRtnReqQuoteNotice(Task *task);
    
    void processRspAccountRentInfo(Task *task);
    
    void processRspTradeMessage(Task *task);
    
    void processRtnTradeMessage(Task *task);
    
    void processRspQryHisOrder(Task *task);
    
    void processRspQryHisOrderProcess(Task *task);
    
    void processRspQryHisFill(Task *task);
    
    void processRspQryHisPosition(Task *task);
    
    void processRspQryHisDelivery(Task *task);
    
    void processRspQryAccountCashAdjust(Task *task);
    
    void processRspQryBill(Task *task);
    
    void processRspAccountFeeRent(Task *task);
    
    void processRspAccountMarginRent(Task *task);
    
    void processRspAddMobileDevice(Task *task);
    
    void processRspQryManageInfoForEStar(Task *task);
    
    void processRspQrySystemParameter(Task *task);
    
    void processRspQryTradeCenterFrontAddress(Task *task);
    
    void processRtnCommodityInfo(Task *task);
    
    void processRtnCurrencyInfo(Task *task);
    
    void processRspQryAccountStorage(Task *task);
    
    void processRtnAccountStorage(Task *task);
    
    void processRspQrySpotLock(Task *task);
    
    void processRtnSpotLock(Task *task);
    
    void processRspSpecialOrderAction(Task *task);
    
    void processRtnSpecialOrder(Task *task);
    
    void processRtnCombinePosition(Task *task);
    
    void processRtnContractQuote(Task *task);
    
    void processRspQryTrustDevice(Task *task);
    
    void processRspAddTrustDevice(Task *task);
    
    void processRspDelTrustDevice(Task *task);
    
    void processRtnAddUserRight(Task *task);
    
    void processRtnDelUserRight(Task *task);
    
    void processRspQryManagerConfigFile(Task *task);



    //-------------------------------------------------------------------------------------
    //data??????????????????
    //error?????????????????
    //id??????id
    //last??????????
    //i??????
    //-------------------------------------------------------------------------------------
    
    virtual void onConnect(string UserNo) {};
    
    virtual void onRspLogin(string UserNo, int nErrorCode, const dict &data) {};
    
    virtual void onRtnContactInfo(string UserNo, int nErrorCode, char last, const dict &data) {};
    
    virtual void onRspRequestVertificateCode(string UserNo, unsigned int session, int nErrorCode, char last, const dict &data) {};
    
    virtual void onRspRequestVerifyIdentity(string UserNo, unsigned int session, int nErrorCode, char last, const dict &data) {};
    
    virtual void onRspSetVertificateCode(string UserNo, unsigned int session, int nErrorCode, char last, const dict &data) {};
    
    virtual void onRtnErrorMsg(string UserNo, string ErrorMsg) {};
    
    virtual void onAPIReady(string UserNo) {};
    
    virtual void onDisconnect(string UserNo, int nReasonCode) {};
    
    virtual void onRspSubmitUserLoginInfo(string UserNo, unsigned int session, const dict &data) {};
    
    virtual void onRspChangePassword(string UserNo, unsigned int session, int nErrorCode, const dict &data) {};
    
    virtual void onRspSetReservedInfo(string UserNo, unsigned int session, int nErrorCode, string info) {};
    
    virtual void onRtnContract(string UserNo, const dict &data) {};
    
    virtual void onRtnFund(string UserNo, const dict &data) {};
    
    virtual void onRtnOrder(string UserNo, unsigned int session, const dict &data) {};
    
    virtual void onRspOrderAction(string UserNo, unsigned int session, int nErrorCode, const dict &data) {};
    
    virtual void onRspQryOrderProcess(string UserNo, unsigned int session, int nErrorCode, char last, const dict &data) {};
    
    virtual void onRtnFill(string UserNo, const dict &data) {};
    
    virtual void onRtnPosition(string UserNo, const dict &data) {};
    
    virtual void onRtnClose(string UserNo, const dict &data) {};
    
    virtual void onRtnPositionProfit(string UserNo, const dict &data) {};
    
    virtual void onRspQryDeepQuote(string UserNo, unsigned int session, int nErrorCode, char last, const dict &data) {};
    
    virtual void onRtnExchangeStateInfo(string UserNo, const dict &data) {};
    
    virtual void onRtnReqQuoteNotice(string UserNo, const dict &data) {};
    
    virtual void onRspAccountRentInfo(string UserNo, unsigned int session, int nErrorCode, char last, const dict &data) {};
    
    virtual void onRspTradeMessage(string UserNo, unsigned int session, int nErrorCode, char last, const dict &data) {};
    
    virtual void onRtnTradeMessage(string UserNo, const dict &data) {};
    
    virtual void onRspQryHisOrder(string UserNo, unsigned int session, int nErrorCode, char last, const dict &data) {};
    
    virtual void onRspQryHisOrderProcess(string UserNo, unsigned int session, int nErrorCode, char last, const dict &data) {};
    
    virtual void onRspQryHisFill(string UserNo, unsigned int session, int nErrorCode, char last, const dict &data) {};
    
    virtual void onRspQryHisPosition(string UserNo, unsigned int session, int nErrorCode, char last, const dict &data) {};
    
    virtual void onRspQryHisDelivery(string UserNo, unsigned int session, int nErrorCode, char last, const dict &data) {};
    
    virtual void onRspQryAccountCashAdjust(string UserNo, unsigned int session, int nErrorCode, char last, const dict &data) {};
    
    virtual void onRspQryBill(string UserNo, unsigned int session, int nErrorCode, char last, const dict &data) {};
    
    virtual void onRspAccountFeeRent(string UserNo, unsigned int session, int nErrorCode, char last, const dict &data) {};
    
    virtual void onRspAccountMarginRent(string UserNo, unsigned int session, int nErrorCode, char last, const dict &data) {};
    
    virtual void onRspAddMobileDevice(string UserNo, unsigned int session, int nErrorCode, char last, const dict &data) {};
    
    virtual void onRspQryManageInfoForEStar(string UserNo, unsigned int session, int nErrorCode, char last, const dict &data) {};
    
    virtual void onRspQrySystemParameter(string UserNo, unsigned int session, int nErrorCode, char last, const dict &data) {};
    
    virtual void onRspQryTradeCenterFrontAddress(string UserNo, unsigned int session, int nErrorCode, char last, const dict &data) {};
    
    virtual void onRtnCommodityInfo(string UserNo, const dict &data) {};
    
    virtual void onRtnCurrencyInfo(string UserNo, const dict &data) {};
    
    virtual void onRspQryAccountStorage(string UserNo, unsigned int session, int nErrorCode, char last, const dict &data) {};
    
    virtual void onRtnAccountStorage(string UserNo, const dict &data) {};
    
    virtual void onRspQrySpotLock(string UserNo, unsigned int session, int nErrorCode, char last, const dict &data) {};
    
    virtual void onRtnSpotLock(string UserNo, const dict &data) {};
    
    virtual void onRspSpecialOrderAction(string UserNo, unsigned int session, int nErrorCode, const dict &data) {};
    
    virtual void onRtnSpecialOrder(string UserNo, unsigned int session, const dict &data) {};
    
    virtual void onRtnCombinePosition(string UserNo, const dict &data) {};
    
    virtual void onRtnContractQuote(string UserNo, const dict &data) {};
    
    virtual void onRspQryTrustDevice(string UserNo, unsigned int session, int nErrorCode, char last, const dict &data) {};
    
    virtual void onRspAddTrustDevice(string UserNo, unsigned int session, int nErrorCode, char last, const dict &data) {};
    
    virtual void onRspDelTrustDevice(string UserNo, unsigned int session, int nErrorCode, char last, const dict &data) {};
    
    virtual void onRtnAddUserRight(string UserNo, const dict &data) {};
    
    virtual void onRtnDelUserRight(string UserNo, const dict &data) {};
    
    virtual void onRspQryManagerConfigFile(string UserNo, unsigned int session, int nErrorCode, char last, const dict &data) {};



    //-------------------------------------------------------------------------------------
    //req:?????????????????
    //-------------------------------------------------------------------------------------
	void createEsTradeAPI(int nResult);

	void release();

	void init();

	int exit();

	//void getEsTradeAPIVersion(string pVersion, int nVersionLen);

	//int setEsTradeAPIDataPath(string pPath);

	//int setEsTradeAPILogLevel(string LogLevel);

	int setUserInfo(const dict &req);

	int setBackUpAddress(string UserNo, const dict &req);

	pybind11::tuple requestVerifyIdentity(string UserNo, const dict &req);

	int startUser(string UserNo, const dict &req);

	int stopUser(string UserNo);

	pybind11::tuple requestVertificateCode(string UserNo, const dict &req);

	pybind11::tuple setVertificateCode(string UserNo, const dict &req);

    //pybind11::tuple getAccount(const dict &req);

	//pybind11::tuple getExchange(const dict &req);

	//pybind11::tuple getCommodity(const dict &req);

	//pybind11::tuple getContract(const dict &req);

	pybind11::tuple insertOrder(string UserNo, const dict &req);

	pybind11::tuple cancelOrder(string UserNo, const dict &req);

	//pybind11::tuple getFund(string UserNo, const dict &req);

	//pybind11::tuple getOrder(const dict &req);

    pybind11::tuple qryOrderProcess(string UserNo, const dict &data);
    
    pybind11::tuple qryDeepQuote(string UserNo, const dict &data);
    
    pybind11::tuple qryAccountRent(string UserNo, const dict &data);
    
    pybind11::tuple qryAccountFeeRent(string UserNo, const dict &data);
    
    pybind11::tuple qryAccountMarginRent(string UserNo, const dict &data);
    
    pybind11::tuple qryAccountCashAdjust(string UserNo, const dict &data);
    
    pybind11::tuple qryBill(string UserNo, const dict &data);
    
    pybind11::tuple qryHisOrder(string UserNo, const dict &data);
    
    pybind11::tuple qryHisOrderProcess(string UserNo, const dict &data);
    
    pybind11::tuple qryHisFill(string UserNo, const dict &data);
    
    pybind11::tuple qryHisPosition(string UserNo, const dict &data);
    
    pybind11::tuple qryHisDelivery(string UserNo, const dict &data);
    
    pybind11::tuple qryManageInfoForEStar(string UserNo, const dict &data);
    
    pybind11::tuple qrySystemParameter(string UserNo, const dict &data);
    
    pybind11::tuple qryTradeCenterFrontAddress(string UserNo, const dict &data);
    
    pybind11::tuple qryTradeMessage(string UserNo, const dict &data);
    
    pybind11::tuple qryAccountStorage(string UserNo, const dict &data);
    
    pybind11::tuple qrySpotLock(string UserNo, const dict &data);
    
    pybind11::tuple qryTrustDevice(string UserNo, const dict &data);
    
    pybind11::tuple qryManagerConfigFile(string UserNo, const dict &data);

};
